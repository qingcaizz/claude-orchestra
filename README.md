# Agent Viewer â€” Claude Code Agent Team å®æ—¶åä½œçœ‹æ¿

> ä¸“ä¸º **Claude Code Agent Team æ¨¡å¼**æ‰“é€ çš„ Web çœ‹æ¿ã€‚å½“å¤šä¸ª AI Agent ç»„æˆå›¢é˜Ÿåä½œå¼€å‘æ—¶ï¼Œè¿™ä¸ªçœ‹æ¿è®©æ•´ä¸ªè¿‡ç¨‹**å¯è§†åŒ–ã€å¯å¹²é¢„ã€å¯å›æº¯**ã€‚

![Agent Viewer Screenshot](./screenshot.png)

## ä»€ä¹ˆæ˜¯ Claude Code Agent Teamï¼Ÿ

Claude Code æ”¯æŒåˆ›å»º **Agent Team**ï¼šä¸€ä¸ª Team Lead Agent åè°ƒå¤šä¸ªä¸“ä¸š Agentï¼ˆåç«¯ã€å‰ç«¯ã€æµ‹è¯•ç­‰ï¼‰å¹¶è¡Œå·¥ä½œï¼Œé€šè¿‡ SendMessage äº’ç›¸æ²Ÿé€šï¼Œé€šè¿‡ TaskList ç®¡ç†ä»»åŠ¡ä¾èµ–ã€‚

**é—®é¢˜åœ¨äºï¼šè¿™ä¸ªè¿‡ç¨‹å¯¹äººç±»æ˜¯é»‘ç®±çš„ã€‚**

- Agent ä¹‹é—´çš„ SendMessage ä½ çœ‹ä¸åˆ°å®Œæ•´å†…å®¹
- idle_notification åªæœ‰å‡ ä¸ªè¯çš„æ‘˜è¦ï¼Œä¿¡æ¯é‡æä½
- ä¸çŸ¥é“å“ªä¸ª Agent å¡ä½äº†ã€å“ªä¸ªåœ¨ç­‰å¾…ã€å“ªä¸ªå·²å®Œæˆ
- æƒ³ä¸­é€”ä¿®æ”¹æŸä¸ª Agent çš„æ–¹å‘ï¼Œæ²¡æœ‰ç»Ÿä¸€å…¥å£

**Agent Viewer å°±æ˜¯æ‰“å¼€è¿™ä¸ªé»‘ç®±çš„å·¥å…·ã€‚**

## æ ¸å¿ƒèƒ½åŠ›

### 1. ä¸‰åˆ—çœ‹æ¿ â€” ä¸€çœ¼æŒæ¡ Agent Team å…¨å±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   RUNNING    â”‚  â”‚     IDLE     â”‚  â”‚  COMPLETED   â”‚
â”‚   (å·¥ä½œä¸­)    â”‚  â”‚   (ç­‰å¾…ä¸­)    â”‚  â”‚   (å·²å®Œæˆ)    â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ â— backend   â”‚  â”‚ â—‹ frontend   â”‚  â”‚ â—Œ qa-tester  â”‚
â”‚ â— researcher â”‚  â”‚              â”‚  â”‚ â—Œ data-prep  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ä¸­é€”æ²Ÿé€š â€” éšæ—¶ç»™ä»»ä½• Agent å‘æŒ‡ä»¤

Agent Team æ¨¡å¼ä¸‹ï¼ŒTeam Lead æ˜¯å”¯ä¸€çš„æ²Ÿé€šæ¢çº½ã€‚ä½†é€šè¿‡çœ‹æ¿ï¼Œ**ä½ å¯ä»¥ç›´æ¥ç»•è¿‡ Team Leadï¼Œå¯¹ä»»ä½• Agent ä¸‹è¾¾æŒ‡ä»¤**ï¼š

- "åœä¸‹æ¥ï¼Œå…ˆä¿®è¿™ä¸ª bug"
- "ç”¨ TypeScript é‡å†™"
- "æŠŠè¿›åº¦æ±‡æŠ¥ç»™ team-lead"

æ¯ä¸ª Agent å¡ç‰‡éƒ½æœ‰è¾“å…¥æ¡†ï¼Œ`Ctrl+Enter` å‘é€ã€‚

### 3. ç»ˆç«¯è¾“å‡º â€” çœ‹åˆ° Agent çš„å®Œæ•´æ€è€ƒè¿‡ç¨‹

ç‚¹å‡» `VIEW OUTPUT` å¯ä»¥çœ‹åˆ°ä»»ä½• Agent çš„å®Œæ•´ç»ˆç«¯è¾“å‡ºï¼š

- Agent åœ¨è¯»å“ªäº›æ–‡ä»¶ã€å†™äº†ä»€ä¹ˆä»£ç ã€è°ƒäº†ä»€ä¹ˆå‘½ä»¤
- å®Œæ•´ ANSI å½©è‰²æ¸²æŸ“ï¼ˆ16/256/24-bit è‰²å½©ï¼‰
- å®æ—¶æ»šåŠ¨æ›´æ–°

### 4. ä¸€é”®åˆ›å»º Agent

ç‚¹å‡» `[+ SPAWN]` æˆ–æŒ‰ `N`ï¼š

- æŒ‡å®šé¡¹ç›®è·¯å¾„ + ä»»åŠ¡ prompt
- è‡ªåŠ¨ä»¥ `claude --dangerously-skip-permissions` å¯åŠ¨
- LLM æ™ºèƒ½ç”Ÿæˆæ ‡ç­¾ï¼ˆå…ˆå¯å‘å¼å‘½åï¼Œåå° Haiku å¼‚æ­¥å‡çº§ï¼‰
- è‡ªåŠ¨å¤„ç† Claude Code å¯åŠ¨æ—¶çš„ä¿¡ä»»æç¤ºå’Œå¼¹çª—

### 5. è‡ªåŠ¨å‘ç°

å·²ç»åœ¨ç»ˆç«¯é‡Œè·‘ç€çš„ Claude Code è¿›ç¨‹ï¼Ÿçœ‹æ¿è‡ªåŠ¨æ£€æµ‹å¹¶çº³å…¥ç®¡ç†ã€‚

## çŠ¶æ€æ£€æµ‹é€»è¾‘

çœ‹æ¿æ¯ **3 ç§’**è½®è¯¢æ‰€æœ‰ Agent çš„ PTY ç»ˆç«¯è¾“å‡ºï¼Œé€šè¿‡æ¨¡å¼åŒ¹é…åˆ¤æ–­çŠ¶æ€ï¼š

| ç»ˆç«¯ä¿¡å· | åˆ¤å®šçŠ¶æ€ | å«ä¹‰ |
|---------|---------|------|
| `esc to interrupt` | ğŸŸ¢ **running** | Agent æ­£åœ¨æ‰§è¡Œå·¥å…·è°ƒç”¨æˆ–ç”Ÿæˆå›å¤ |
| ç©ºæç¤ºç¬¦ `>` / `â¯` | ğŸŸ¡ **idle** | Agent ç­‰å¾…ç”¨æˆ·è¾“å…¥ |
| `Yes/No` é€‰æ‹© | ğŸŸ¡ **idle** | Agent ç­‰å¾…æƒé™æ‰¹å‡† |
| `space to select` | ğŸŸ¡ **idle** | Agent å±•ç¤ºå¤šé€‰èœå• |
| è¿›ç¨‹é€€å‡º | âš« **completed** | Agent å·²ç»“æŸ |
| æ¶ˆæ¯å‘é€å 10s å†… | ğŸŸ¢ **running** | å®½é™æœŸï¼Œé˜²æ­¢è¯¯åˆ¤ |

## å¡ç‰‡å±•ç¤ºå†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— backend-dev                   â”‚  â† æ™ºèƒ½æ ‡ç­¾ (LLM ç”Ÿæˆ)
â”‚ ~/my-project                    â”‚  â† é¡¹ç›®è·¯å¾„
â”‚ "æ­å»º Express åç«¯ API..."       â”‚  â† åŸå§‹ prompt
â”‚                                 â”‚
â”‚ [VIEW OUTPUT]  [ATTACH]  [KILL] â”‚  â† æ“ä½œæŒ‰é’®
â”‚                                 â”‚
â”‚ > è¾“å…¥æ¶ˆæ¯...          [SEND]   â”‚  â† éšæ—¶å‘é€æŒ‡ä»¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Browser (å‰ç«¯)                     â”‚
â”‚   å•æ–‡ä»¶ index.html â€” çº¯ HTML/CSS/JS         â”‚
â”‚   SSE å®æ—¶æ¥æ”¶çŠ¶æ€æ¨é€                         â”‚
â”‚   å†…ç½® ANSI-to-HTML ç»ˆç«¯æ¸²æŸ“å™¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ SSE + REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            server.js (åç«¯)                   â”‚
â”‚   Express + node-pty (ä¼ªç»ˆç«¯)                â”‚
â”‚   Agent æ³¨å†Œè¡¨ (.agent-registry.json)         â”‚
â”‚   çŠ¶æ€æ£€æµ‹å¼•æ“ (3s è½®è¯¢)                      â”‚
â”‚   LLM æ ‡ç­¾ç”Ÿæˆ (Claude Haiku)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ PTY ä¼ªç»ˆç«¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Claude Code Agent Ã— N                â”‚
â”‚   æ¯ä¸ª Agent ç‹¬ç«‹ PTY ä¼šè¯                    â”‚
â”‚   æ”¯æŒ Agent Team æ¨¡å¼ä¸‹çš„æ‰€æœ‰ Agent          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- [Node.js](https://nodejs.org/) v18+
- [Claude CLI](https://docs.anthropic.com/en/docs/claude-code)ï¼ˆ`claude` å‘½ä»¤åœ¨ PATH ä¸­å¯ç”¨ï¼‰
- Windows / macOS / Linux

### å®‰è£…

```bash
git clone https://github.com/qingcaizz/agent-viewer.git
cd agent-viewer
npm install
npm start
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:4200

### é…ç½®

| ç¯å¢ƒå˜é‡ | é»˜è®¤å€¼ | è¯´æ˜ |
|---------|--------|------|
| `PORT` | `4200` | æœåŠ¡ç«¯å£ |
| `HOST` | `0.0.0.0` | ç»‘å®šåœ°å€ |

## æ‰‹æœºè¿œç¨‹ç®¡ç†ï¼ˆTailscaleï¼‰

é€šè¿‡ [Tailscale](https://tailscale.com/) å¯ä»¥ç”¨æ‰‹æœºç®¡ç† Agent Teamï¼š

1. ç”µè„‘å’Œæ‰‹æœºéƒ½è£… Tailscale å¹¶ç™»å½•åŒä¸€è´¦å·
2. å¯åŠ¨ Agent Viewer
3. æ‰‹æœºè®¿é—® `http://<tailscale-ip>:4200`

![Mobile](https://github.com/user-attachments/assets/c7298d61-dd37-4d0f-8b0a-d9d1f0231782)

## API

| Method | Path | åŠŸèƒ½ |
|--------|------|------|
| GET | `/api/agents` | è·å–æ‰€æœ‰ Agent çŠ¶æ€ |
| POST | `/api/agents` | åˆ›å»ºæ–° Agent |
| POST | `/api/agents/:name/send` | å‘é€æ¶ˆæ¯ |
| POST | `/api/agents/:name/upload` | ä¸Šä¼ æ–‡ä»¶ |
| DELETE | `/api/agents/:name` | ç»ˆæ­¢ Agent |
| GET | `/api/agents/:name/output` | ç»ˆç«¯è¾“å‡º |
| GET | `/api/events` | SSE å®æ—¶æ¨é€ |

## è‡´è°¢

åŸºäº [hallucinogen/agent-viewer](https://github.com/hallucinogen/agent-viewer) äºŒæ¬¡å¼€å‘ï¼Œæ–°å¢ï¼š
- **Windows æ”¯æŒ**ï¼ˆnode-pty æ›¿ä»£ tmuxï¼‰
- **Agent Team æ•°æ®é›†æˆ**ï¼ˆTeam config / Task çŠ¶æ€è¯»å–ï¼‰
- **äº¤äº’å¼æ“ä½œ**ï¼ˆæƒé™ç¡®è®¤ã€è®¡åˆ’å®¡æ‰¹ç­‰è‡ªåŠ¨å¤„ç†ï¼‰

## èµèµ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯·ä½œè€…å–æ¯å’–å•¡ â˜•

<img src="./wechat-pay.jpg" alt="å¾®ä¿¡èµèµç " width="300">
